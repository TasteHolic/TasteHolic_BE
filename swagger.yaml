openapi: 3.0.0
info:
  title: TasteHolic API
  description: TasteHolic API 서버 문서
  version: 1.0.0
servers:
  - url: http://localhost:3000 # 추후 수정 필요
    description: Local server
# 예시
paths:
  /api/v1/users/my-bar/post:
    post:
      summary: 마이바에 술 추가
      description: 술 종류와 이름으로 술 등록.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "까베르네 쇼비뇽"
                category:
                  type: string
                  example: "Wine"
      tags:
        - MyBar
      responses:
        200:
          description: 등록한 술 정보
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    type: object
                    nullable: true
                    properties:
                      code:
                        type: string
                        example: null
                      message:
                        type: string
                        example: null
                  success:
                    type: object
                    properties:
                      id:
                        type: string
                        example: "9"
                      userId:
                        type: string
                        example: "1"
                      alcoholId:
                        type: string
                        nullable: true
                        example: null
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-02-01T09:48:17.000Z"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-02-01T09:48:17.000Z"
                      name:
                        type: string
                        example: null
                      category:
                        type: string
                        example: null
        400:
          description: 잘못된 요청 (이미 마이바에 추가된 술)
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "U001"
                      message:
                        type: string
                        example: "이미 마이바에 추가되어 있는 술입니다."
                  success:
                    type: object
                    nullable: true
                    example: null
  /api/v1/users/my-bar/view:
    get:
      summary: 마이바 조회
      description: 특정 사용자의 마이바에 있는 술 리스트를 반환.
      tags:
        - MyBar
      responses:
        200:
          description: 사용자의 마이바 정보
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    type: object
                    nullable: true
                    properties:
                      code:
                        type: string
                        example: null
                      message:
                        type: string
                        example: null
                  success:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "9"
                            userId:
                              type: string
                              example: "1"
                            alcoholId:
                              type: string
                              nullable: true
                              example: null
                            createdAt:
                              type: string
                              format: date-time
                              example: "2025-02-01T09:48:17.000Z"
                            updatedAt:
                              type: string
                              format: date-time
                              example: "2025-02-01T09:48:17.000Z"
                            name:
                              type: string
                              example: "까베르네 쇼비뇽"
                            category:
                              type: string
                              example: "Wine"
  /api/v1/users/my-bar/delete/{barId}:
    delete:
      summary: 마이바의 특정 술 삭제
      description: 삭제한 술 정보를 반환.
      parameters:
        - in: path
          name: barId
          schema:
            type: integer
      tags:
        - MyBar
      responses:
        200:
          description: 삭제한 술 정보
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    type: object
                    nullable: true
                    properties:
                      code:
                        type: string
                        example: null
                      message:
                        type: string
                        example: null
                  success:
                    type: object
                    properties:
                      id:
                        type: string
                        example: "9"
                      userId:
                        type: string
                        example: "1"
                      alcoholId:
                        type: string
                        nullable: true
                        example: null
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-02-01T09:48:17.000Z"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-02-01T09:48:17.000Z"
                      name:
                        type: string
                        example: null
                      category:
                        type: string
                        example: null
        400:
          description: 잘못된 요청 (마이바에 없는 술)
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "U002"
                      message:
                        type: string
                        example: "마이바에 존재하지 않는 술입니다."
                  success:
                    type: object
                    nullable: true
                    example: null
  /api/v1/recipes:
    post:
      summary: 유저 레시피 등록
      description: 새로운 유저 레시피를 등록합니다.
      operationId: createUserRecipe
      tags:
        - Recipes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - ingredients
                - recipe
                - glassType
                - status
                - abv
              properties:
                name:
                  type: string
                  example: "SampleDrink"
                ingredients:
                  type: object
                  additionalProperties:
                    type: string
                  example:
                    "라임 웨지": "3개"
                    "민트 잎": "7개"
                    "심플 시럽": "3/4 온스"
                    "라이트 럼": "2 온스"
                    "소다수": "적당량"
                recipe:
                  type: array
                  items:
                    type: string
                  example:
                    - "재료들을 함께 넣고 섞는다"
                    - "차갑게 마신다"
                glassType:
                  type: string
                  example: "Martini"
                status:
                  type: string
                  enum: [published, draft]
                  example: "published"
                tastes:
                  type: array
                  items:
                    type: string
                  example: ["Sweet", "Sour"]
                aromas:
                  type: array
                  items:
                    type: string
                  example: ["Citrus"]
                colors:
                  type: array
                  items:
                    type: string
                  example: ["#FFFFFF"]
                abv:
                  type: number
                  example: 12
      responses:
        "200":
          description: 레시피 등록 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    nullable: true
                    example: null
                  success:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 11
                      userId:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: "SampleDrink"
                      imageUrl:
                        type: string
                        nullable: true
                        example: "example/test.jpg"
                      ingredients:
                        type: object
                        additionalProperties:
                          type: string
                        example:
                          "소다수": "적당량"
                          "민트 잎": "5개"
                          "라이트 럼": "3 온스"
                          "라임 웨지": "2개"
                          "심플 시럽": "1 온스"
                      recipe:
                        type: array
                        items:
                          type: string
                        example:
                          - "재료들을 함께 넣고 흔든다"
                          - "얼음과 함께 차갑게 마신다"
                      glassType:
                        type: string
                        example: "Old Fashioned"
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-02-02T14:00:50.000Z"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-02-02T15:30:20.000Z"
                      status:
                        type: string
                        enum: [published, draft]
                        example: "published"
                      tastes:
                        type: array
                        items:
                          type: string
                        example: ["Sweet", "Bitter"]
                      aromas:
                        type: array
                        items:
                          type: string
                        example: ["Woody"]
                      colors:
                        type: array
                        items:
                          type: string
                        nullable: true
                        example: ["#FFFFFF"]
                      likes:
                        type: integer
                        example: 0
                      abv:
                        type: number
                        example: 15
                      views:
                        type: integer
                        example: 10
  /api/v1/recipes/{recipeId}:
    patch:
      summary: 레시피 수정
      description: 기존 레시피를 수정합니다. 레시피 소유자만 수정할 수 있습니다.
      tags:
        - Recipes
      parameters:
        - name: recipeId
          in: path
          required: true
          schema:
            type: integer
          description: 수정할 레시피 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "Updated SampleDrink"
                ingredients:
                  type: object
                  additionalProperties:
                    type: string
                  example:
                    "라임 웨지": "2개"
                    "민트 잎": "5개"
                    "심플 시럽": "1 온스"
                    "라이트 럼": "3 온스"
                    "소다수": "적당량"
                recipe:
                  type: array
                  items:
                    type: string
                  example:
                    - "재료들을 함께 넣고 흔든다"
                    - "얼음과 함께 차갑게 마신다"
                glassType:
                  type: string
                  example: "Old Fashioned"
                status:
                  type: string
                  enum: [published, draft]
                  example: "published"
                tastes:
                  type: array
                  items:
                    type: string
                  example: ["Sweet", "Bitter"]
                aromas:
                  type: array
                  items:
                    type: string
                  example: ["Woody"]
                colors:
                  type: array
                  items:
                    type: string
                  nullable: true
                  example: ["#FFFFFF"]
                abv:
                  type: number
                  example: 15
      responses:
        "200":
          description: 레시피 수정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    nullable: true
                    example: null
                  success:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 11
                      userId:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: "Updated SampleDrink"
                      imageUrl:
                        type: string
                        nullable: true
                        example: "example/test.jpg"
                      ingredients:
                        type: object
                        additionalProperties:
                          type: string
                        example:
                          "소다수": "적당량"
                          "민트 잎": "5개"
                          "라이트 럼": "3 온스"
                          "라임 웨지": "2개"
                          "심플 시럽": "1 온스"
                      recipe:
                        type: array
                        items:
                          type: string
                        example:
                          - "재료들을 함께 넣고 흔든다"
                          - "얼음과 함께 차갑게 마신다"
                      glassType:
                        type: string
                        example: "Old Fashioned"
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-02-02T14:00:50.000Z"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-02-02T15:30:20.000Z"
                      status:
                        type: string
                        enum: [published, draft]
                        example: "published"
                      tastes:
                        type: array
                        items:
                          type: string
                        example: ["Sweet", "Bitter"]
                      aromas:
                        type: array
                        items:
                          type: string
                        example: ["Woody"]
                      colors:
                        type: array
                        items:
                          type: string
                        nullable: true
                        example: ["#FFFFFF"]
                      likes:
                        type: integer
                        example: 0
                      abv:
                        type: number
                        example: 15
                      views:
                        type: integer
                        example: 10
        "404":
          description: 존재하지 않는 레시피
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "R001"
                      message:
                        type: string
                        example: "해당 레시피를 찾을 수 없습니다."
                  success:
                    type: "null"
                    example: null
        "403":
          description: 권한 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "U001"
                      message:
                        type: string
                        example: "수정 권한이 없습니다."
                  success:
                    type: "null"
                    example: null
    get:
      summary: 레시피 조회
      description: 유저 레시피 또는 칵테일 레시피를 조회합니다.
      operationId: getRecipe
      tags:
        - Recipes
      parameters:
        - name: recipeId
          in: path
          required: true
          schema:
            type: string
          description: |
            조회할 레시피 ID.  
            - 유저 레시피 → `user-000`  
            - 칵테일 레시피 → `cocktail-000`
      responses:
        "200":
          description: 레시피 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    nullable: true
                    example: null
                  success:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 11
                      userId:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: "Updated SampleDrink"
                      imageUrl:
                        type: string
                        nullable: true
                        example: "example/test.jpg"
                      ingredients:
                        type: object
                        additionalProperties:
                          type: string
                        example:
                          "소다수": "적당량"
                          "민트 잎": "5개"
                          "라이트 럼": "3 온스"
                          "라임 웨지": "2개"
                          "심플 시럽": "1 온스"
                      recipe:
                        type: array
                        items:
                          type: string
                        example:
                          - "재료들을 함께 넣고 흔든다"
                          - "얼음과 함께 차갑게 마신다"
                      glassType:
                        type: string
                        example: "Old Fashioned"
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-02-02T14:00:50.000Z"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-02-02T15:30:20.000Z"
                      status:
                        type: string
                        enum: [published, draft]
                        example: "published"
                      tastes:
                        type: array
                        items:
                          type: string
                        example: ["Sweet", "Bitter"]
                      aromas:
                        type: array
                        items:
                          type: string
                        example: ["Woody"]
                      colors:
                        type: array
                        items:
                          type: string
                        nullable: true
                        example: ["#FFFFFF"]
                      likes:
                        type: integer
                        example: 0
                      abv:
                        type: number
                        example: 15
                      views:
                        type: integer
                        example: 10
        "404":
          description: 존재하지 않는 레시피
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "R001"
                      message:
                        type: string
                        example: "해당 레시피를 찾을 수 없습니다."
                  success:
                    type: string
                    example: null
    delete:
      summary: 레시피 삭제
      description: 특정 레시피를 삭제합니다.
      operationId: deleteRecipe
      tags:
        - Recipes
      parameters:
        - name: recipeId
          in: path
          required: true
          schema:
            type: string
          description: 삭제할 레시피 ID 
      responses:
        "200":
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "SUCCESS"
                  error:
                    nullable: true
                    example: null
                  success:
                    type: object
                    properties:
                      success:
                        type: boolean
                        example: true
        "404":
          description: 존재하지 않는 레시피
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      errorCode:
                        type: string
                        example: "R001"
                      reason:
                        type: string
                        example: "해당 레시피를 찾을 수 없습니다."
                      data:
                        type: "null"
                        example: null
                  success:
                    type: "null"
                    example: null
        "403":
          description: 권한 없음
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultType:
                    type: string
                    example: "FAIL"
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "U001"
                      message:
                        type: string
                        example: "수정 권한이 없습니다."
                  success:
                    type: "null"
                    example: null
